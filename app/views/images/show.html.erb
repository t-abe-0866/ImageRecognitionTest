<p id="notice"><%= notice %></p>

<% if @image.avatar? %>  <!-- アップロード画像がある場合に実行する -->
  <canvas id="board" width="460" height="460"></canvas>
  <canvas id="rectangle" width="100" height="100"></canvas>

  <script>
  window.onload = ()=>{
    // canvas準備
    const board = document.querySelector("#board");  //getElementById()等でも可。オブジェクトが取れれば良い。
    const ctx = board.getContext("2d");

    // 画像読み込み
    const chara = new Image();
    chara.src = '<%= @image.avatar.url %>';  // 画像のURLを指定

    chara.onload = () => {
      ctx.drawImage(chara, 0, 0);
      // 四角を描く
      ctx.beginPath();
      ctx.strokeRect(<%= @result_x %>, <%= @result_y %>, <%= @result_xl %>, <%= @result_yl %>);
    };

  };
  </script>
<% end %>

<p><%= @result %></p>

<p><%= @resul1 %></p>

<%= link_to 'Edit', edit_image_path(@image) %> |
<%= link_to 'Back', images_path %>
